<!DOCTYPE html>
<html>
<head>
    <title>Dynamic Form Example</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Function to add a new row
        function addRow() {
            var newRow = $("<tr>");
            var cols = "";

            cols += '<td><select name="type[]" class="type"><option value="">Select Type</option><option value="Cavalry">Cavalry</option><option value="Mage">Mage</option></select></td>';
            cols += '<td><select name="weapon[]" class="weapon"><option value="">Select Weapon</option></select></td>';
            cols += '<td><select name="armor[]" class="armor"><option value="">Select Armor</option></select></td>';
            cols += '<td><input type="text" name="size[]" size="5"/></td>';
            cols += '<td><input type="text" name="training[]" size="5"/></td>';
            cols += '<td><input type="button" class="ibtnDel" value="Remove"></td>';

            newRow.append(cols);
            $("table.order-list").append(newRow);
            bindDropdowns();
        }

        // Function to remove the selected row
        function removeRow() {
            $(this).closest("tr").remove();
        }

        // Function to bind the dynamic dropdown menus
        function bindDropdowns() {
            $(".type").on("change", function() {
                var weaponDropdown = $(this).closest("tr").find(".weapon");
                var armorDropdown = $(this).closest("tr").find(".armor");
                var type = $(this).val();

                // Clear previous options
                weaponDropdown.empty();
                armorDropdown.empty();

                // Add options based on the selected type
                if (type === "Cavalry") {
                    weaponDropdown.append('<option value="PRC-E6">PRC-E6</option>');
                    weaponDropdown.append('<option value="PRC-E7">PRC-E7</option>');
                    weaponDropdown.append('<option value="PRC-E8">PRC-E8</option>');
                    weaponDropdown.append('<option value="ACFU">ACFU</option>');
                    weaponDropdown.append('<option value="ATFU">ATFU</option>');
                    weaponDropdown.append('<option value="APFU">APFU</option>');
                    weaponDropdown.append('<option value="AUFU">AUFU</option>');
                    
                    armorDropdown.append('<option value="">Select Armor</option><option value="Plate">Plate</option>');
                } else if (type === "Mage") {
                    weaponDropdown.append('<option value="">Select Weapon</option><option value="Staff">Staff</option><option value="Wand">Wand</option>');
                    armorDropdown.append('<option value="">Select Armor</option><option value="Robe">Robe</option><option value="Cloak">Cloak</option>');
                }
            });
        }

        $(document).ready(function() {
            // Bind initial dropdowns
            bindDropdowns();

            // Add a new row on button click
            $("#addRow").on("click", addRow);

            // Remove row on button click
            $("table.order-list").on("click", ".ibtnDel", removeRow);
        });
    </script>
</head>
<body>
    <form method="post" action="backend.php">
        <table class="order-list">
            <thead>
                <tr>
                    <th>Type</th>
                    <th>Weapon</th>
                    <th>Armor</th>
                    <th>Size</th>
                    <th>Training</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <select name="type[]" class="type">
                            <option value="">Select Type</option>
                            <option value="Cavalry">Cavalry</option>
                            <option value="Mage">Mage</option>
                        </select>
                    </td>
                    <td>
                        <select name="weapon[]" class="weapon">
                            <option value="">Select Weapon</option>
                        </select>
                    </td>
                    <td>
                        <select name="armor[]" class="armor">
                            <option value="">Select Armor</option>
                        </select>
                    </td>
                    <td><input type="text" name="size[]" size="5"/></td>
                    <td><input type="text" name="training[]" size="5"/></td>
                    <td></td>
                </tr>
            </tbody>
        </table>
        <table>
          <tr>
            <td>
            <input type="submit" value="Submit" />
            <input type="button" id="addRow" value="Add Row" />
          </td>
          </tr>          
        </table>
    </form>
</body>
</html>